(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(t,e,a){t.exports=a(19)},,,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(8),s=a.n(o),r=(a(15),a(2)),l=a(3),d=a(6),h=a(4),p=a(1),c=a(5);function u(t){return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}function g(t,e){if(t.length!==e.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}function f(t){var e=t[0],a=t[1],n=t[2];function i(t){var e=t.toString(16);return 1===e.length?"0"+e:e}return"#"+i(e)+i(a)+i(n)}var v=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).handleMouseDown=a.handleMouseDown.bind(Object(p.a)(a)),a.handleMouseDp=a.handleMouseUp.bind(Object(p.a)(a)),a.formatValue=a.formatValue.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"formatValue",value:function(){if("color"!==this.props.type&&!1===isNaN(this.props.value))return parseFloat(this.props.value).toFixed(1)}},{key:"handleMouseDown",value:function(t){this.props.handleDraftConnection(this.props.id)}},{key:"handleMouseUp",value:function(t){this.props.handleDraftConnectionDrop(this.props.id)}},{key:"render",value:function(){return i.a.createElement("li",{className:"socket","data-type":this.props.type},i.a.createElement("span",{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseDp,className:"socket--plug"}),i.a.createElement("span",{className:"socket--label"},this.props.label,": ",this.formatValue()))}}]),e}(i.a.Component),D=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleDraftConection=a.handleDraftConection.bind(Object(p.a)(a)),a.handleDraftConectionDrop=a.handleDraftConectionDrop.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(){this.props.removeNode(this.props.id)}},{key:"handleChange",value:function(t){var e=parseFloat(t.target.value);isNaN(e)&&(e=0),this.props.updateOutput(this.props.id,0,e),this.props.update(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleDraftConection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConectionDrop",value:function(t){this.props.finishDraftConection(this.props.id,t)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.outputs.map(function(e){return i.a.createElement(v,{key:e.id,id:e.id,finishDraftConectionDrop:t.handleDraftConectionDrop,handleDraftConnection:t.handleDraftConection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"},i.a.createElement("input",{type:"number",value:this.props.outputs[0].value,onChange:this.handleChange})),i.a.createElement("ul",{className:"node-outputs"},a))}}]),e}(i.a.Component),m=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleClose=a.handleClose.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"handleClose",value:function(){this.props.removeNode(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},"Display",i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("div",{className:"node-body"},i.a.createElement("h2",null,parseFloat(this.props.inputs[0].value).toFixed(2))))}}]),e}(i.a.Component),b=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).solve=a.solve.bind(Object(p.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(p.a)(a)),a.handleSelect=a.handleSelect.bind(Object(p.a)(a)),a.handleDraftConnection=a.handleDraftConnection.bind(Object(p.a)(a)),a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.state={operation:"add"},a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(){this.props.removeNode(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"solve",value:function(){var t=parseFloat(this.props.inputs[0].value),e=parseFloat(this.props.inputs[1].value),a=0;return!1===isNaN(t)&&!1===isNaN(e)&&("add"===this.state.operation&&(a=t+e),"subtract"===this.state.operation&&(a=t-e),"multiply"===this.state.operation&&(a=t*e),"divide"===this.state.operation&&0!==e&&(a=t/e),"average"===this.state.operation&&(a=(t+e)/2)),a}},{key:"handleSelect",value:function(t){this.setState({operation:t.target.value})}},{key:"handleDraftConnection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"componentDidUpdate",value:function(t){var e=this.solve();this.props.outputs[0].value!==e&&(this.props.updateOutput(this.props.id,0,e),this.props.updateNodes(this.props.id))}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})}),n=this.props.outputs.map(function(e){return i.a.createElement(v,{key:e.id,id:e.id,finishDraftConectionDrop:t.handleDraftConectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},"Math",i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"},i.a.createElement("select",{value:this.state.operation,onChange:this.handleSelect},i.a.createElement("option",{value:"add"},"Add"),i.a.createElement("option",{value:"subtract"},"Subtract"),i.a.createElement("option",{value:"multiply"},"Multiply"),i.a.createElement("option",{value:"divide"},"Divide"),i.a.createElement("option",{value:"average"},"Average"))),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("ul",{className:"node-outputs"},n))}}]),e}(i.a.Component),C=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(p.a)(a)),a.solve=a.solve.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"solve",value:function(){var t=this.props.inputs[0].value;return t<0&&(t=0),{radius:t,fill:this.props.inputs[1].value}}},{key:"componentDidUpdate",value:function(){var t=this.solve();this.props.pen.radius===t.radius&&this.props.pen.fill===t.fill||this.props.updatePen(t)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{type:e.type,key:e.id,id:e.id,handleDraftConnectionDrop:t.handleDraftConnectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node permanent",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},this.props.title),i.a.createElement("div",{className:"node-body"}),i.a.createElement("ul",{className:"node-inputs"},a))}}]),e}(i.a.Component),y=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleDraftConection=a.handleDraftConection.bind(Object(p.a)(a)),a.handleDraftConectionDrop=a.handleDraftConectionDrop.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(t){this.props.removeNode(this.props.id)}},{key:"componentDidUpdate",value:function(){var t=this.props.drawingData.distance,e=this.props.drawingData.x,a=this.props.drawingData.y;isNaN(e)&&(e=0),isNaN(a)&&(a=0),t!==this.props.outputs[0].value&&(this.props.updateOutput(this.props.id,0,t),this.props.update(this.props.id)),e!==this.props.outputs[1].value&&(this.props.updateOutput(this.props.id,1,e),this.props.update(this.props.id)),a!==this.props.outputs[2].value&&(this.props.updateOutput(this.props.id,2,a),this.props.update(this.props.id))}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleDraftConection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConectionDrop",value:function(t){this.props.finishDraftConection(this.props.id,t)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.outputs.map(function(e){return i.a.createElement(v,{type:e.type,key:e.id,id:e.id,finishDraftConectionDrop:t.handleDraftConectionDrop,handleDraftConnection:t.handleDraftConection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node permanent",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title)),i.a.createElement("div",{className:"node-body"}),i.a.createElement("ul",{className:"node-outputs"},a))}}]),e}(i.a.Component),E=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleDraftConnection=a.handleDraftConnection.bind(Object(p.a)(a)),a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(t){this.props.removeNode(this.props.id)}},{key:"handleChange",value:function(t){var e=t.target.value;this.props.updateOutput(this.props.id,0,e),this.props.update(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"solve",value:function(){var t=parseFloat(this.props.inputs[0].value),e=parseFloat(this.props.inputs[1].value),a=parseFloat(this.props.inputs[2].value);return t>255&&(t=255),e>255&&(e=255),a>255&&(a=255),[t,e,a]}},{key:"componentDidUpdate",value:function(t){var e=this.solve();!1===g(this.props.outputs[0].value,e)&&(this.props.updateOutput(this.props.id,0,e),this.props.updateNodes(this.props.id))}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleDraftConnection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})}),n=this.props.outputs.map(function(e){return i.a.createElement(v,{type:e.type,key:e.id,id:e.id,finishDraftConnectionDrop:t.handleDraftConnectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"}),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("ul",{className:"node-outputs"},n))}}]),e}(i.a.Component),k=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleDraftConnection=a.handleDraftConnection.bind(Object(p.a)(a)),a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(t){this.props.removeNode(this.props.id)}},{key:"handleChange",value:function(t){var e=t.target.value;this.props.updateOutput(this.props.id,0,e),this.props.update(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"solve",value:function(){var t=this.props.inputs[0].value;return[t[0],t[1],t[2]]}},{key:"componentDidUpdate",value:function(t){var e=this.solve();this.props.outputs[0].value===e[0]&&this.props.outputs[1].value===e[1]&&this.props.outputs[2].value===e[2]||(this.props.updateOutput(this.props.id,0,e[0]),this.props.updateOutput(this.props.id,1,e[1]),this.props.updateOutput(this.props.id,2,e[2]),this.props.updateNodes(this.props.id))}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleDraftConnection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{type:e.type,handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})}),n=this.props.outputs.map(function(e){return i.a.createElement(v,{type:e.type,key:e.id,id:e.id,finishDraftConnectionDrop:t.handleDraftConnectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"}),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("ul",{className:"node-outputs"},n))}}]),e}(i.a.Component),O=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleDraftConnection=a.handleDraftConnection.bind(Object(p.a)(a)),a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a.formatOutput=a.formatOutput.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(t){this.props.removeNode(this.props.id)}},{key:"handleChange",value:function(t){var e=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}(t.target.value),a=[e.r,e.g,e.b];this.props.updateOutput(this.props.id,0,a),this.props.update(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"componentDidUpdate",value:function(t){}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleDraftConnection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"formatOutput",value:function(){return f(this.props.outputs[0].value)}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})}),n=this.props.outputs.map(function(e){return i.a.createElement(v,{type:e.type,key:e.id,id:e.id,finishDraftConnectionDrop:t.handleDraftConnectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"},i.a.createElement("input",{type:"color",onChange:this.handleChange,value:this.formatOutput()})),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("ul",{className:"node-outputs"},n))}}]),e}(i.a.Component),j=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1,operation:"sine"},a.c=null,a.canvasRef=i.a.createRef(),a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleSelect=a.handleSelect.bind(Object(p.a)(a)),a.handleDraftConnection=a.handleDraftConnection.bind(Object(p.a)(a)),a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a.solve=a.solve.bind(Object(p.a)(a)),a.drawWave=a.drawWave.bind(Object(p.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(p.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(t){this.props.removeNode(this.props.id)}},{key:"handleSelect",value:function(t){this.setState({operation:t.target.value})}},{key:"handleChange",value:function(t){var e=this.solve();this.props.updateOutput(this.props.id,0,e),this.props.update(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleDraftConnection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"componentDidMount",value:function(){this.c=this.canvasRef.current.getContext("2d"),this.c.fillCircle=function(t,e,a){this.beginPath(),this.arc(t,e,a,0,2*Math.PI,!1),this.fill()}}},{key:"componentDidUpdate",value:function(){this.drawWave();var t=this.solve(this.c.canvas.width/2);this.props.outputs[0].value!==t&&(this.props.updateOutput(this.props.id,0,t),this.props.updateNodes(this.props.id))}},{key:"sgn",value:function(t){return t>0?1:0===t?0:t<0?-1:void 0}},{key:"solve",value:function(t){var e,a=this.props.inputs[0].value,n=this.props.inputs[1].value,i=this.props.inputs[2].value,o=1/n;return"sine"===this.state.operation?a*Math.sin(2*Math.PI*n*t+i):"triangle"===this.state.operation?(a*=.65)*Math.asin(Math.sin(2*Math.PI/o*t+i)):"square"===this.state.operation?a*this.sgn(Math.sin(2*Math.PI*n*t+i)):"sawtooth"===this.state.operation?-2*a/Math.PI*Math.atan((e=t*Math.PI/o+i/2,1/Math.tan(e))):void 0}},{key:"drawWave",value:function(){this.c.clearRect(0,0,this.c.canvas.width,this.c.canvas.height),this.c.fillStyle="lightgray";for(var t=0;t<15;t++)this.c.fillRect(20*t+15,0,1,this.props.height);for(var e=0;e<15;e++)this.c.fillRect(0,20*e+15,this.props.width,1);this.c.fillStyle="black",this.c.fillCircle(this.c.canvas.width/2,-1*this.solve(this.c.canvas.width/2)+60,3),this.c.fillRect(0,60,this.c.canvas.width,1),this.c.beginPath(),this.c.moveTo(0,60);for(var a=0;a<this.c.canvas.width;a+=.1){var n=-1*this.solve(a);this.c.lineTo(a,n+60)}this.c.lineWidth=1.5,this.c.stroke(),this.c.closePath()}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})}),n=this.props.outputs.map(function(e){return i.a.createElement(v,{key:e.id,id:e.id,finishDraftConnectionDrop:t.handleDraftConnectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,label:e.label})});return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"},i.a.createElement("canvas",{className:"wave--canvas",ref:this.canvasRef,height:this.props.height-140,width:this.props.width-20}),i.a.createElement("select",{value:this.state.operation,onChange:this.handleSelect},i.a.createElement("option",{value:"sine"},"Sine"),i.a.createElement("option",{value:"square"},"Square"),i.a.createElement("option",{value:"triangle"},"Triangle"),i.a.createElement("option",{value:"sawtooth"},"Sawtooth"))),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("ul",{className:"node-outputs"},n))}}]),e}(i.a.Component),w=(a(16),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1,draggingStopIndex:null,stops:[{position:0,color:"#ff33aa",picker:i.a.createRef()},{position:1,color:"#aabbcc",picker:i.a.createRef()}]},a.c=null,a.canvasRef=i.a.createRef(),a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.handleDraftConnection=a.handleDraftConnection.bind(Object(p.a)(a)),a.handleDraftConnectionDrop=a.handleDraftConnectionDrop.bind(Object(p.a)(a)),a.solve=a.solve.bind(Object(p.a)(a)),a.drawGradient=a.drawGradient.bind(Object(p.a)(a)),a.handleStopColorChange=a.handleStopColorChange.bind(Object(p.a)(a)),a.handleStopMouseDown=a.handleStopMouseDown.bind(Object(p.a)(a)),a.handleStopMouseUp=a.handleStopMouseUp.bind(Object(p.a)(a)),a.handleStopDrag=a.handleStopDrag.bind(Object(p.a)(a)),a.addStop=a.addStop.bind(Object(p.a)(a)),a.removeStop=a.removeStop.bind(Object(p.a)(a)),a.triggerColorPicker=a.triggerColorPicker.bind(Object(p.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(p.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(){this.props.removeNode(this.props.id)}},{key:"handleChange",value:function(){var t=this.solve();this.props.updateOutput(this.props.id,0,t),this.props.update(this.props.id)}},{key:"drawGradient",value:function(){var t=this.c.createLinearGradient(0,0,this.props.width-20,0);this.state.stops.forEach(function(e){t.addColorStop(e.position,e.color)}),this.c.fillStyle=t,this.c.fillRect(0,0,this.c.canvas.width,this.c.canvas.height),this.c.fillStyle="black";var e=this.props.inputs[0].value;e<0?e=0:e>1&&(e=1),this.c.fillRect(e*this.c.canvas.width,12,1,this.c.canvas.height)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"handleStopColorChange",value:function(t){var e=t.target.dataset.index,a=t.target.value;this.setState(function(t){return t.stops[e].color=a,t})}},{key:"handleStopMouseDown",value:function(t,e){t.stopPropagation(),this.setState({draggingStopIndex:e})}},{key:"handleStopMouseUp",value:function(t){t.stopPropagation(),this.setState({draggingStopIndex:null})}},{key:"addStop",value:function(t){var e=(t.clientX-this.props.x-14)/(this.c.canvas.width-12),a=this.c.getImageData(e,1,1,1).data,n=f([a[0],a[1],a[2]]);e>1&&(e=1),e<0&&(e=0),this.setState(function(t){return t.stops.push({position:e,color:n,picker:i.a.createRef()}),t})}},{key:"triggerColorPicker",value:function(t,e){t.stopPropagation(),this.state.stops[e].picker.current.click()}},{key:"removeStop",value:function(t,e){t.stopPropagation(),this.setState(function(t){return t.stops.splice(e,1),t})}},{key:"handleStopDrag",value:function(t){var e=this,a=(t.clientX-this.props.x-14)/(this.c.canvas.width-12);a>1&&(a=1),a<0&&(a=0),null!==this.state.draggingStopIndex&&this.setState(function(t){return t.stops[e.state.draggingStopIndex].position=a,t})}},{key:"handleDraftConnection",value:function(t){this.props.startDraftConnection(this.props.id,t)}},{key:"handleDraftConnectionDrop",value:function(t){this.props.finishDraftConnection(this.props.id,t)}},{key:"componentDidMount",value:function(){this.c=this.canvasRef.current.getContext("2d")}},{key:"componentWillUnmount",value:function(){this.props.removeNode(this.props.id)}},{key:"componentDidUpdate",value:function(){this.drawGradient();var t=this.solve();!1===g(this.props.outputs[0].value,t)&&(this.props.updateOutput(this.props.id,0,t),this.props.updateNodes(this.props.id))}},{key:"handleInputMouseUp",value:function(t){t.preventDefault()}},{key:"solve",value:function(){var t=this.props.inputs[0].value;t>1&&(t=1),t<0&&(t=0);var e=t*this.c.canvas.width,a=this.c.getImageData(e,1,1,1).data;return[a[0],a[1],a[2]]}},{key:"render",value:function(){var t=this,e={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")},a=this.props.inputs.map(function(e){return i.a.createElement(v,{handleDraftConnectionDrop:t.handleDraftConnectionDrop,key:e.id,id:e.id,value:e.value,label:e.label})}),n=this.props.outputs.map(function(e){return i.a.createElement(v,{key:e.id,id:e.id,finishDraftConnectionDrop:t.handleDraftConnectionDrop,handleDraftConnection:t.handleDraftConnection,value:e.value,type:e.type,label:e.label})}),o=this.state.stops.map(function(e,a){var n={left:"".concat(100*e.position,"%")},o={background:"".concat(e.color)};return i.a.createElement("li",{key:a,style:n,className:"gradient--stop ","data-dragging":e.dragging},i.a.createElement("div",{onMouseDown:function(e){t.handleStopMouseDown(e,a)},onMouseUp:function(e){t.handleStopMouseUp(e)},onClick:function(t){t.stopPropagation()},style:o,"data-index":a,className:"stop--indicator"}),i.a.createElement("div",{className:"stop--controls"},i.a.createElement("button",{onClick:function(e){t.triggerColorPicker(e,a)},className:"stop--edit"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{fill:"#000000",d:"M20.71,4.04C21.1,3.65 21.1,3 20.71,2.63L18.37,0.29C18,-0.1 17.35,-0.1 16.96,0.29L15,2.25L18.75,6M17.75,7L14,3.25L4,13.25V17H7.75L17.75,7Z"}))),i.a.createElement("button",{className:"stop--remove",onClick:function(e){return t.removeStop(e,a)}},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})))),i.a.createElement("input",{onClick:function(t){t.stopPropagation()},ref:e.picker,type:"color","data-index":a,value:e.color,onChange:t.handleStopColorChange}))});return i.a.createElement("div",{onMouseUp:this.handleStopMouseUp,"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:e},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"},i.a.createElement("div",{className:"gradient"},i.a.createElement("canvas",{ref:this.canvasRef,width:this.props.width-20+"px",height:"80",className:"gradient--canvas"}),i.a.createElement("ul",{className:"gradient--stops",onClick:this.addStop,onMouseMove:this.handleStopDrag},o))),i.a.createElement("ul",{className:"node-inputs"},a),i.a.createElement("ul",{className:"node-outputs"},n))}}]),e}(i.a.Component)),N=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={dragging:!1},a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClose",value:function(){this.props.removeNode(this.props.id)}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.handleDragStart(this.props.id)}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),this.props.handleDragEnd(this.props.id)}},{key:"render",value:function(){var t={width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px"),transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")};return i.a.createElement("div",{"data-dragging":this.state.dragging,className:"node",key:this.props.id,style:t},i.a.createElement("header",{onMouseDown:this.handleDragStart,onMouseUp:this.handleDragEnd,className:"node-header"},i.a.createElement("span",null,this.props.title),i.a.createElement("button",{onClick:this.handleClose,className:"node--close"},i.a.createElement("svg",{viewBox:"0 0 24 24"},i.a.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})),"Close")),i.a.createElement("div",{className:"node-body"},i.a.createElement("p",null,"Node Paint is an experimental drawing tool designed and built by Max Kohler."),i.a.createElement("p",null,"Right-click to add nodes.")))}}]),e}(i.a.Component),S=function(t){function e(){return Object(r.a)(this,e),Object(d.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(l.a)(e,[{key:"generatePath",value:function(t,e,a,n){return"M ".concat(t," ").concat(e," C").concat(t+40," ").concat(e,", ").concat(a-40," ").concat(n,", ").concat(a," ").concat(n)}},{key:"render",value:function(){return i.a.createElement("path",{d:this.generatePath(this.props.x1,this.props.y1,this.props.x2,this.props.y2)})}}]),e}(i.a.Component),x={contextMenu:{isOpen:!1,x:0,y:0},draftConnection:{isActive:!1,from:{nodeID:0,socket:0}},mouse:{x:0,y:0},drag:{isActive:!1,nodeIndex:null},nodes:[{type:"rgbPicker",title:"Pen Output",id:"1",x:660,y:540,width:160,height:80,inputs:[],outputs:[{label:"Color",value:[0,0,0],id:1,type:"color"}]},{type:"pen",title:"Pen Output",id:"pen",x:960,y:500,width:160,height:80,inputs:[{label:"Radius",value:0,id:0},{label:"Fill",value:0,id:1,type:"color"}]},{type:"data",title:"Drawing Info",id:"data",x:60,y:250,width:160,height:90,outputs:[{label:"Distance",value:0,id:0,type:""},{label:"Pen X",value:0,id:1,type:""},{label:"Pen Y",value:0,id:2,type:""}]}],connections:[{from:{nodeID:"data",socket:0},to:{nodeID:"pen",socket:0}},{from:{nodeID:"1",socket:0},to:{nodeID:"pen",socket:1}}]},M=(a(17),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).handleClick=a.handleClick.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"handleClick",value:function(t){this.props.addNode(t.target.getAttribute("data-value"))}},{key:"render",value:function(){var t={transform:"translateX(".concat(this.props.x,"px) translateY(").concat(this.props.y,"px)")};return i.a.createElement("ul",{className:"menu",style:t},i.a.createElement("li",{className:"menu--item header"},"Basic"),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"number",onClick:this.handleClick},"Number")),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"display",onClick:this.handleClick},"Display")),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"math",onClick:this.handleClick},"Math")),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"wave",onClick:this.handleClick},"Wave")),i.a.createElement("li",{className:"menu--item header"},"Colour"),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"rgbSplit",onClick:this.handleClick},"Split RGB")),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"rgbCombine",onClick:this.handleClick},"Combine RGB")),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"rgbPicker",onClick:this.handleClick},"Colour Picker")),i.a.createElement("li",{className:"menu--item"},i.a.createElement("button",{"data-value":"ramp",onClick:this.handleClick},"Colour Ramp")))}}]),e}(i.a.Component));var L=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).updateNodes=a.updateNodes.bind(Object(p.a)(a)),a.getNodeByID=a.getNodeByID.bind(Object(p.a)(a)),a.updateOutput=a.updateOutput.bind(Object(p.a)(a)),a.addNode=a.addNode.bind(Object(p.a)(a)),a.removeNode=a.removeNode.bind(Object(p.a)(a)),a.handleMouseMove=a.handleMouseMove.bind(Object(p.a)(a)),a.handleContextMenu=a.handleContextMenu.bind(Object(p.a)(a)),a.startDraftConnection=a.startDraftConnection.bind(Object(p.a)(a)),a.finishDraftConnection=a.finishDraftConnection.bind(Object(p.a)(a)),a.handleMouseUp=a.handleMouseUp.bind(Object(p.a)(a)),a.handleDragStart=a.handleDragStart.bind(Object(p.a)(a)),a.handleDragEnd=a.handleDragEnd.bind(Object(p.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(p.a)(a)),a.state=x,a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.setState(function(t){return t})}},{key:"addNode",value:function(t){var e=this;this.setState(function(a){return a.nodes.push(function(t,e,a){var n={type:t,title:"New Node",id:Math.random().toFixed(5),x:e,y:a,width:250,height:100,outputs:[],inputs:[]};return"number"===t&&(n.title="Number",n.width=180,n.outputs.push({label:"Value",value:0,id:0})),"math"===t&&(n.title="Math",n.height=130,n.width=210,n.outputs.push({label:"Output",value:0,id:0}),n.inputs.push({label:"Input A",value:0,id:0}),n.inputs.push({label:"Input B",value:0,id:1})),"display"===t&&(n.title="Display",n.width=120,n.height=90,n.inputs.push({label:"Input",value:0,id:0})),"rgbCombine"===t&&(n.title="Combine RGB",n.width=140,n.inputs.push({label:"R",value:0,id:0}),n.inputs.push({label:"G",value:0,id:1}),n.inputs.push({label:"B",value:0,id:2}),n.outputs.push({label:"Color",value:0,id:0,type:"color"})),"rgbSplit"===t&&(n.title="Split RGB",n.width=140,n.inputs.push({label:"Color",value:0,id:0,type:"color"}),n.outputs.push({label:"R",value:0,id:0}),n.outputs.push({label:"G",value:0,id:1}),n.outputs.push({label:"B",value:0,id:2})),"rgbPicker"===t&&(n.title="Color Picker",n.width=140,n.outputs.push({label:"Color",type:"color",value:[123,32,255],id:0})),"pen"===t&&(n.title="Pen",n.inputs.push({label:"Radius",value:0,id:0}),n.inputs.push({label:"Colour",value:0,id:1})),"wave"===t&&(n.title="Wave",n.height=260,n.inputs.push({label:"Amplitude",value:0,id:"0"}),n.inputs.push({label:"Frequency",value:0,id:"1"}),n.inputs.push({label:"Phase",value:0,id:"2"}),n.outputs.push({label:"Value",value:0,id:"0"})),"ramp"===t&&(n.title="Color Ramp",n.height=200,n.inputs.push({label:"Position",value:.5,id:"0"}),n.outputs.push({label:"Color",value:[0,0,0],id:"0",type:"color"})),n}(t,e.state.contextMenu.x,e.state.contextMenu.y)),a.contextMenu.isOpen=!1,a})}},{key:"removeNode",value:function(t){var e=this.getNodeByID(t);!1!==e&&this.setState(function(a){return a.connections=a.connections.filter(function(e){return e.from.nodeID!==t&&e.to.nodeID!==t}),a.nodes.splice(e,1),a})}},{key:"startDraftConnection",value:function(t,e){this.setState({draftConnection:{isActive:!0,from:{nodeID:t,socket:e}}})}},{key:"isConnectionValid",value:function(t){return!0}},{key:"finishDraftConnection",value:function(t,e){var a=this,n={from:{nodeID:this.state.draftConnection.from.nodeID,socket:this.state.draftConnection.from.socket},to:{nodeID:t,socket:e},id:Math.random()};this.isConnectionValid(n)&&this.setState(function(t){for(var e=0;e<a.state.connections.length;e++){var i=a.state.connections[e];if(i.to.nodeID===n.to.nodeID&&i.to.socket===n.to.socket){t.connections.splice(e,1);break}}return t.connections.push(n),t},function(){return a.updateNodes(n.from.nodeID)})}},{key:"handleDragStart",value:function(t){var e=this.getNodeByID(t);this.setState({drag:{isActive:!0,nodeIndex:e}})}},{key:"handleDragEnd",value:function(){this.setState({drag:{isActive:!1,nodeIndex:null}})}},{key:"handleMouseMove",value:function(t){var e=t.clientX-this.state.mouse.x,a=t.clientY-this.state.mouse.y;this.setState({mouse:{x:t.clientX,y:t.clientY,deltaX:e,deltaY:a}},function(){var t,e,a,n,i=this;t=this.state.mouse.x,e=this.state.mouse.y,a=this.state.contextMenu.x,n=this.state.contextMenu.y,Math.sqrt(Math.pow(t-a,2)-Math.pow(e-n,2))>200&&!0===this.state.contextMenu.isOpen&&this.setState({contextMenu:{isActive:!1}}),this.state.drag.isActive&&this.setState(function(t){return t.nodes[i.state.drag.nodeIndex].x+=i.state.mouse.deltaX,t.nodes[i.state.drag.nodeIndex].y+=i.state.mouse.deltaY,t})})}},{key:"handleMouseUp",value:function(t){!0===this.state.draftConnection.isActive&&this.setState({draftConnection:{isActive:!1}}),!0===this.state.drag.isActive&&this.setState({drag:{isActive:!1}})}},{key:"handleContextMenu",value:function(t){t.preventDefault(),this.setState({contextMenu:{isOpen:!0,x:t.clientX,y:t.clientY}})}},{key:"getNodeByID",value:function(t){for(var e=0;e<this.state.nodes.length;e++)if(this.state.nodes[e].id===t)return e;return console.error("Node with ID ".concat(t," could not be found.")),!1}},{key:"updateOutput",value:function(t,e,a){var n=this.getNodeByID(t);this.setState(function(t){return t.nodes[n].outputs[e].value=a,t})}},{key:"updateNodes",value:function(t){for(var e=this,a=[],n=0;n<this.state.connections.length;n++){var i=this.state.connections[n];i.from.nodeID===t&&a.push(i)}for(var o=function(t){var n=a[t],i=e.getNodeByID(n.to.nodeID),o=e.getNodeByID(n.from.nodeID);e.setState(function(t){return t.nodes[i].inputs[n.to.socket].value=t.nodes[o].outputs[n.from.socket].value,t})},s=0;s<a.length;s++)o(s)}},{key:"render",value:function(){var t=this.state.connections.map(function(t){var e=this.getNodeByID(t.to.nodeID),a=this.getNodeByID(t.from.nodeID),n=this.state.nodes[a].x+this.state.nodes[a].width,o=this.state.nodes[a].y+this.state.nodes[a].height-17*(this.state.nodes[a].outputs.length-t.from.socket),s=this.state.nodes[e].x,r=this.state.nodes[e].y+this.state.nodes[e].height-17*(this.state.nodes[e].inputs.length-t.to.socket);return i.a.createElement(S,{key:t.id,x1:n,y1:o,x2:s,y2:r})},this),e=this.state.nodes.map(function(t){return"number"===t.type?i.a.createElement(D,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateOutput:this.updateOutput,update:this.updateNodes,outputs:t.outputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"data"===t.type?i.a.createElement(y,{drawingData:this.props.drawingData,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,outputs:t.outputs,update:this.updateNodes,updateOutput:this.updateOutput,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"display"===t.type?i.a.createElement(m,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,inputs:t.inputs,update:this.updateNodes,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"math"===t.type?i.a.createElement(b,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,inputs:t.inputs,outputs:t.outputs,updateOutput:this.updateOutput,updateNodes:this.updateNodes,width:t.width,height:t.height,x:t.x,y:t.y,id:t.id,key:t.id,title:t.title}):"pen"===t.type?i.a.createElement(C,{pen:this.props.pen,updatePen:this.props.updatePen,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateOutput:this.updateOutput,update:this.updateNodes,inputs:t.inputs,outputs:t.outputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"rgbCombine"===t.type?i.a.createElement(E,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateNodes:this.updateNodes,updateOutput:this.updateOutput,update:this.updateNodes,outputs:t.outputs,inputs:t.inputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"rgbPicker"===t.type?i.a.createElement(O,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateNodes:this.updateNodes,updateOutput:this.updateOutput,update:this.updateNodes,outputs:t.outputs,inputs:t.inputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"rgbSplit"===t.type?i.a.createElement(k,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateNodes:this.updateNodes,updateOutput:this.updateOutput,update:this.updateNodes,outputs:t.outputs,inputs:t.inputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"wave"===t.type?i.a.createElement(j,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateNodes:this.updateNodes,updateOutput:this.updateOutput,update:this.updateNodes,outputs:t.outputs,inputs:t.inputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"ramp"===t.type?i.a.createElement(w,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,finishDraftConnection:this.finishDraftConnection,startDraftConnection:this.startDraftConnection,updateNodes:this.updateNodes,updateOutput:this.updateOutput,update:this.updateNodes,outputs:t.outputs,inputs:t.inputs,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title}):"info"===t.type&&i.a.createElement(N,{removeNode:this.removeNode,handleDragStart:this.handleDragStart,handleDragEnd:this.handleDragEnd,width:t.width,height:t.height,x:t.x,y:t.y,key:t.id,id:t.id,title:t.title})},this),a="";this.state.contextMenu.isOpen&&(a=i.a.createElement(M,{addNode:this.addNode,x:this.state.contextMenu.x,y:this.state.contextMenu.y}));var n="";if(this.state.draftConnection.isActive){var o=this.state.nodes[this.getNodeByID(this.state.draftConnection.from.nodeID)],s=o.x+o.width,r=o.y+o.height-17*(o.outputs.length-this.state.draftConnection.from.socket);n=i.a.createElement(S,{key:0,x1:s,y1:r,x2:this.state.mouse.x,y2:this.state.mouse.y})}return i.a.createElement("div",{className:"nodeContainer",onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove,onContextMenu:this.handleContextMenu},i.a.createElement("svg",{width:this.props.width+"px",height:this.props.height+"px"},t,n),a,e)}}]),e}(i.a.Component),I=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={isDrawing:!1},a.canvasRef=i.a.createRef(),a.c=null,a.handleMouseDown=a.handleMouseDown.bind(Object(p.a)(a)),a.handleMouseUp=a.handleMouseUp.bind(Object(p.a)(a)),a.handleMouseMove=a.handleMouseMove.bind(Object(p.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(p.a)(a)),a.clear=a.clear.bind(Object(p.a)(a)),a.resetData=a.resetData.bind(Object(p.a)(a)),a.saveImage=a.saveImage.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.c=this.canvasRef.current.getContext("2d"),this.c.fillCircle=function(t,e,a){this.beginPath(),this.arc(t,e,a,0,2*Math.PI,!1),this.fill()}}},{key:"handleMouseMove",value:function(t){if(this.state.isDrawing){this.props.updateDrawingData({distance:this.props.drawingData.distance+1,speed:0,x:t.clientX,y:t.clientY-this.props.height});var e=t.clientX,a=t.clientY-this.props.height;this.c.fillStyle=u(this.props.pen.fill),this.c.fillCircle(e,a,this.props.pen.radius)}}},{key:"handleMouseDown",value:function(t){this.setState({isDrawing:!0}),this.props.updateDrawingData({distance:this.props.drawingData.distance+1,speed:0,x:t.clientX,y:t.clientY-this.props.height});var e=t.clientX,a=t.clientY-this.props.height;this.c.fillStyle=u(this.props.pen.fill),this.c.fillCircle(e,a,this.props.pen.radius)}},{key:"handleMouseUp",value:function(){this.setState({isDrawing:!1})}},{key:"clear",value:function(){this.c.clearRect(0,0,this.props.width,this.props.height)}},{key:"saveImage",value:function(t){this.c.canvas.toBlob(function(t){var e=window.URL||window.webkitURL,a=document.createElement("a");a.href=e.createObjectURL(t),a.download="untitled.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)})}},{key:"resetData",value:function(){this.props.updateDrawingData({distance:0,speed:0,area:0,x:0,y:0})}},{key:"render",value:function(){return i.a.createElement("div",{className:"canvas panel"},i.a.createElement("div",{className:"panel--menu"},i.a.createElement("button",{onClick:this.resetData},"Reset"),i.a.createElement("button",{onClick:this.clear},"Clear"),i.a.createElement("button",{onClick:this.saveImage},"Save")),i.a.createElement("canvas",{height:this.props.height,width:this.props.width,ref:this.canvasRef,onMouseMove:this.handleMouseMove,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,className:"world"}))}}]),e}(i.a.Component),U=(a(18),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={width:0,height:0,pen:{radius:0,fill:[0,0,0],x:0,y:0},drawingData:{speed:0,distance:0,area:0}},a.updatePen=a.updatePen.bind(Object(p.a)(a)),a.updateDrawingData=a.updateDrawingData.bind(Object(p.a)(a)),a}return Object(c.a)(e,t),Object(l.a)(e,[{key:"updatePen",value:function(t){this.setState({pen:{x:t.x,y:t.y,radius:t.radius,fill:t.fill}})}},{key:"updateDrawingData",value:function(t){this.setState({drawingData:t})}},{key:"componentWillMount",value:function(){this.setState({height:window.innerHeight,width:window.innerWidth})}},{key:"render",value:function(){return i.a.createElement("div",{className:"app"},i.a.createElement("header",{className:"app--header"},i.a.createElement("h1",null,"Node Brush"),i.a.createElement("a",{href:"#1"},"Info")),i.a.createElement(L,{drawingData:this.state.drawingData,pen:this.state.pen,updatePen:this.updatePen,width:this.state.width,height:.5*this.state.height}),i.a.createElement("div",{className:"divider"}),i.a.createElement(I,{drawingData:this.state.drawingData,updateDrawingData:this.updateDrawingData,width:this.state.width,height:.5*this.state.height,pen:this.state.pen}))}}]),e}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.a4dd433e.chunk.js.map